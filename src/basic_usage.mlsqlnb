[{"kind":2,"language":"mlsql","value":"load excel.`./example-data/excel/user-behavior.xlsx` \r\nwhere header=\"true\" \r\nas user_behavior;\r\n\r\nselect count(*) from user_behavior as output;","outputs":[{"mime":"x-application/mlsql-notebook","value":"{\n\t\"schema\": {\n\t\t\"type\": \"struct\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"count(1)\",\n\t\t\t\t\"type\": \"long\",\n\t\t\t\t\"nullable\": false,\n\t\t\t\t\"metadata\": {\n\t\t\t\t\t\"__autoGeneratedAlias\": \"true\"\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t\"data\": [\n\t\t{\n\t\t\t\"count(1)\": 10000\n\t\t}\n\t]\n}"}]},{"kind":2,"language":"mlsql","value":"!show version;","outputs":[{"mime":"x-application/mlsql-notebook","value":"{\n\t\"schema\": {\n\t\t\"type\": \"struct\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"version\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"buildBy\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"date\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"srcChecksum\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"revision\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"branch\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"url\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"core\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t}\n\t\t]\n\t},\n\t\"data\": [\n\t\t{\n\t\t\t\"version\": \"2.4.0-SNAPSHOT\",\n\t\t\t\"buildBy\": \"williamzhu\",\n\t\t\t\"date\": \"2023-03-06T02:14Z\",\n\t\t\t\"srcChecksum\": \"46a6aec772c8f648de219576ea2d4\",\n\t\t\t\"revision\": \"6f949c572b30e58d2d5d3147f419b376f140ee87\",\n\t\t\t\"branch\": \"master\",\n\t\t\t\"url\": \"https://github.com/byzer-org/byzer-lang.git\",\n\t\t\t\"core\": \"3.3.0\"\n\t\t}\n\t]\n}"}]},{"kind":1,"language":"markdown","value":"## Variable","outputs":[]},{"kind":2,"language":"mlsql","value":"set v1 = \"a\" where scope=\"session\";","outputs":[]},{"kind":2,"language":"mlsql","value":"select \"${v1}\" as col as output;","outputs":[]},{"kind":1,"language":"markdown","value":"## UDF","outputs":[]},{"kind":2,"language":"mlsql","value":"register ScriptUDF.`` as arrayLast \r\nwhere lang=\"scala\"\r\nand code='''def apply(a:Seq[String])={\r\n      a.last\r\n}'''\r\nand udfType=\"udf\";","outputs":[{"mime":"x-application/mlsql-notebook","value":"{\n\t\"schema\": {\n\t\t\"type\": \"struct\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"key\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"value\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t}\n\t\t]\n\t},\n\t\"data\": []\n}"}]},{"kind":2,"language":"mlsql","value":"select arrayLast(array(\"a\",\"b\")) as lastChar as output;","outputs":[{"mime":"x-application/mlsql-notebook","value":"{\n\t\"schema\": {\n\t\t\"type\": \"struct\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"lastChar\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t}\n\t\t]\n\t},\n\t\"data\": [\n\t\t{\n\t\t\t\"lastChar\": \"b\"\n\t\t}\n\t]\n}"}]},{"kind":1,"language":"markdown","value":"## Branch statement","outputs":[]},{"kind":2,"language":"mlsql","value":"select 1 as a as mockTable;\r\nset b_count=`select count(*) from mockTable ` where type=\"sql\" and mode=\"runtime\";\r\n\r\n!if ''':b_count == 1 ''';    \r\n    select 1 as a  as final_table;\r\n!else;    \r\n    select 2 as a  as final_table;\r\n!fi;    \r\n\r\nselect * from final_table as output;","outputs":[]},{"kind":1,"language":"markdown","value":"## Module","outputs":[]},{"kind":2,"language":"mlsql","value":"include lib.`gitee.com/allwefantasy/lib-core`\r\nwhere alias=\"libCore\";","outputs":[]},{"kind":2,"language":"mlsql","value":"include local.`libCore.udf.hello`;\r\nselect hello() as name as output;","outputs":[]},{"kind":1,"language":"markdown","value":"## Function","outputs":[]},{"kind":2,"language":"mlsql","value":"set loadExcel = '''\r\nload excel.`{0}` \r\nwhere header=\"true\" \r\nas {1}\r\n''';\r\n\r\n!loadExcel ./example-data/excel/hello_world.xlsx helloTable;","outputs":[]},{"kind":2,"language":"mlsql","value":"set loadExcel = '''\r\nload excel.`${path}` \r\nwhere header=\"true\" \r\nas ${tableName}\r\n''';\r\n\r\n!loadExcel _ -path ./example-data/excel/hello_world.xlsx -tableName helloTable;","outputs":[]},{"kind":1,"language":"markdown","value":"## Extension","outputs":[]},{"kind":2,"language":"mlsql","value":"!plugin app add - \"byzer-shell-3.3\";","outputs":[]}]